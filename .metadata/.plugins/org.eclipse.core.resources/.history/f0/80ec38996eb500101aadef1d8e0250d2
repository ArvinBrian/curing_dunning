package com.example.curingdunning.repository;
import java.util.Collection;
import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;

import com.example.curingdunning.dto.DunningEventDTO;
import com.example.curingdunning.entity.DunningEvent;

public interface DunningEventRepository extends JpaRepository<DunningEvent, Long> {
    boolean existsByAppliedRuleId(Long ruleId);
    List<DunningEvent> findByCustomerCustomerIdAndServiceNameAndStatus(Long customerId, String serviceName, String status);
    
 // Required by processScheduledBillingAndOverdues (Section 1)
    boolean existsByCustomerCustomerIdAndServiceNameAndStatus(
        Long customerId, 
        String serviceName, 
        String status
    );
    
    // Required by processScheduledBillingAndOverdues (Section 2)
    List<DunningEvent> findByStatus(String status);
	Collection<DunningEventDTO> findByCustomerCustomerIdOrderByCreatedAtDesc(Long customerId);
    
}